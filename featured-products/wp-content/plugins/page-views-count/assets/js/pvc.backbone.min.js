jQuery(function(e){var t=vars.rest_api_url;pvc={apps:{},models:{},collections:{},views:{}},_.templateSettings={evaluate:/[<{][%{](.+?)[%}][}>]/g,interpolate:/[<{][%{]=(.+?)[%}][}>]/g,escape:/[<{][%{]-(.+?)[%}][}>]/g},pvc.models.State=Backbone.Model.extend({defaults:{post_id:0,total_view:1,today_view:1}}),pvc.collections.Stats=Backbone.Collection.extend({model:pvc.models.State,url:t}),pvc.views.State=Backbone.View.extend({model:pvc.models.State,tagName:"span",template:_.template(e("#pvc-stats-view-template").html()),initialize:function(){},render:function(){return console.log("Rendering Page View Count of ID #"+this.model.get("post_id")+" - Today: #"+this.model.get("today_view")+" - Total: #"+this.model.get("total_view")),this.$el.html(this.template(this.model.toJSON())),this}}),pvc.views.AppView=Backbone.View.extend({initialize:function(){this.listenTo(this.collection,"add",this.addOne)},addOne:function(e){var t=new pvc.views.State({model:e});this.$el.html(t.render().el)}}),pvc.apps.app={initialize:function(t,i){this.rest_api_url=i,console.log("Load Page View Count of "+JSON.stringify(t)),view_pvc_ids=[],increase_pvc_ids=[],e.each(t,function(e,t){t.ask_update?increase_pvc_ids.push(post_id):view_pvc_ids.push(post_id)}),increase_pvc_ids.length&&e.get(this.rest_api_url+"/increase/"+increase_pvc_ids.join(","),function(t){console.log(t),t.success&&e.each(t.items,function(t,i){collection=new pvc.collections.Stats,new pvc.views.AppView({collection:collection,el:e("#pvc_stats_"+t)}),collection.add(i)})}),view_pvc_ids.length&&e.get(this.rest_api_url+"/view/"+view_pvc_ids.join(","),function(t){console.log(t),t.success&&e.each(t.items,function(t,i){collection=new pvc.collections.Stats,new pvc.views.AppView({collection:collection,el:e("#pvc_stats_"+t)}),collection.add(i)})})}}}),jQuery(document).ready(function(e){if(e(".pvc_stats").length){var t={};e(".pvc_stats").each(function(){post_id=e(this).attr("element-id"),update_status=e(this).hasClass("pvc_load_by_ajax_update"),t[post_id]={post_id:post_id,ask_update:update_status}}),pvc.apps.app.initialize(t,vars.rest_api_url)}});